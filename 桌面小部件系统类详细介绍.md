# uWidget ç±»è¯¦ç»†ä»‹ç»æ–‡æ¡£

## æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† uWidget ä¸­æ¯ä¸ªç±»çš„è®¾è®¡ç›®çš„ã€åŠŸèƒ½ç‰¹æ€§ã€æ¥å£å®šä¹‰å’Œä½¿ç”¨æ–¹æ³•ã€‚ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå…±åŒ…å«6ä¸ªä¸»è¦å±‚æ¬¡å’Œ30+ä¸ªç±»ã€‚

## ç±»ç»“æ„æ€»è§ˆ

### æ¶æ„å±‚æ¬¡åˆ†å¸ƒ

```
uWidget
â”œâ”€â”€ Framework Layer (æ¡†æ¶å±‚) - 2ä¸ªç±»
â”œâ”€â”€ Core Components (æ ¸å¿ƒç»„ä»¶å±‚) - 3ä¸ªç±»  
â”œâ”€â”€ Backend Management (åç«¯ç®¡ç†å±‚) - 4ä¸ªç±»
â”œâ”€â”€ Utils (å·¥å…·å±‚) - 4ä¸ªç±»
â”œâ”€â”€ Widget Types (Widgetç±»å‹å±‚) - 7ä¸ªç±»
â””â”€â”€ Data Structures (æ•°æ®ç»“æ„å±‚) - 3ä¸ªç»“æ„
```

## è¯¦ç»†ç±»ä»‹ç»

### ğŸ“‹ ç›®å½•ç´¢å¼•

#### [1. Framework Layer (æ¡†æ¶å±‚)](#framework-layer)
- [1.1 WidgetFramework](#widgetframework) - ç³»ç»Ÿå…¥å£ç‚¹å’Œæ¡†æ¶ç®¡ç†
- [1.2 WidgetManager](#widgetmanager) - Widgetç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨

#### [2. Core Components (æ ¸å¿ƒç»„ä»¶å±‚)](#core-components)  
- [2.1 BaseWidget](#basewidget) - WidgetæŠ½è±¡åŸºç±»
- [2.2 WidgetRenderer](#widgetrenderer) - æ¸²æŸ“å¼•æ“
- [2.3 InteractionSystem](#interactionsystem) - äº¤äº’ç³»ç»Ÿ

#### [3. Backend Management (åç«¯ç®¡ç†å±‚)](#backend-management)
- [3.1 ManagementWindow](#managementwindow) - ä¸»ç®¡ç†çª—å£
- [3.2 ConfigWindow](#configwindow) - é…ç½®çª—å£
- [3.3 CreateWidgetDialog](#createwidgetdialog) - Widgetåˆ›å»ºå¯¹è¯æ¡†
- [3.4 ThemeSettingsDialog](#themesettingsdialog) - ä¸»é¢˜è®¾ç½®å¯¹è¯æ¡†

#### [4. Utils (å·¥å…·å±‚)](#utils)
- [4.1 SystemTray](#systemtray) - ç³»ç»Ÿæ‰˜ç›˜ç®¡ç†
- [4.2 Logger](#logger) - æ—¥å¿—è®°å½•ç³»ç»Ÿ
- [4.3 ThemeManager](#thememanager) - ä¸»é¢˜ç®¡ç†å™¨
- [4.4 ThemeResourceManager](#themeresourcemanager) - ä¸»é¢˜èµ„æºç®¡ç†

#### [5. Widget Types (Widgetç±»å‹å±‚)](#widget-types)
- [5.1 ClockWidget](#clockwidget) - æ—¶é’Ÿå°éƒ¨ä»¶
- [5.2 WeatherWidget](#weatherwidget) - å¤©æ°”å°éƒ¨ä»¶
- [5.3 AIRankingWidget](#airankingwidget) - AIæ’è¡Œæ¦œå°éƒ¨ä»¶
- [5.4 SystemPerformanceWidget](#systemperformancewidget) - ç³»ç»Ÿæ€§èƒ½ç›‘æ§
- [5.5 NotesWidget](#noteswidget) - ä¾¿ç­¾å°éƒ¨ä»¶
- [5.6 SimpleNotesWidget](#simplenoteswidget) - ç®€å•ä¾¿ç­¾å°éƒ¨ä»¶
- [5.7 CalendarWidget](#calendarwidget) - æ—¥å†å°éƒ¨ä»¶

#### [6. Data Structures (æ•°æ®ç»“æ„å±‚)](#data-structures)
- [6.1 WidgetConfig](#widgetconfig) - Widgeté…ç½®æ•°æ®ç»“æ„
- [6.2 WidgetType](#widgettype) - Widgetç±»å‹æšä¸¾
- [6.3 LogLevel](#loglevel) - æ—¥å¿—çº§åˆ«æšä¸¾

---

## Framework Layer

### WidgetFramework

**ç±»åˆ«**: ç³»ç»Ÿæ ¸å¿ƒç±»  
**ç»§æ‰¿**: æ— åŸºç±»  
**ä½œç”¨**: ç³»ç»Ÿå…¥å£ç‚¹ï¼Œè´Ÿè´£æ•´ä¸ªWidgetæ¡†æ¶çš„åˆå§‹åŒ–å’Œç®¡ç†

#### ğŸ¯ è®¾è®¡ç›®çš„
WidgetFrameworkæ˜¯æ•´ä¸ªç³»ç»Ÿçš„å…¥å£ç‚¹å’Œæ§åˆ¶ä¸­å¿ƒï¼Œé‡‡ç”¨å•ä¾‹æ¨¡å¼è®¾è®¡ï¼Œè´Ÿè´£ç³»ç»Ÿçš„å¯åŠ¨ã€å…³é—­ä»¥åŠæ ¸å¿ƒç»„ä»¶çš„åè°ƒå·¥ä½œã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QMap<QString, BaseWidget*> widgets;    // Widgetå®ä¾‹é›†åˆ
WidgetConfig config;                   // æ¡†æ¶é…ç½®
bool isInitialized;                    // åˆå§‹åŒ–çŠ¶æ€
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
bool initialize();                     // åˆå§‹åŒ–æ¡†æ¶
void shutdown();                       // å…³é—­æ¡†æ¶
WidgetManager* getWidgetManager();     // è·å–Widgetç®¡ç†å™¨
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
// ç³»ç»Ÿå¯åŠ¨
WidgetFramework* framework = WidgetFramework::getInstance();
if (framework->initialize()) {
    WidgetManager* manager = framework->getWidgetManager();
    // å¼€å§‹ä½¿ç”¨ç³»ç»Ÿ
}

// ç³»ç»Ÿå…³é—­
framework->shutdown();
```

#### âš ï¸ æ³¨æ„äº‹é¡¹
- ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå…¨å±€å”¯ä¸€å®ä¾‹
- å¿…é¡»åœ¨ä½¿ç”¨ä»»ä½•WidgetåŠŸèƒ½å‰å…ˆè°ƒç”¨initialize()
- ç¨‹åºé€€å‡ºå‰åº”è°ƒç”¨shutdown()è¿›è¡Œèµ„æºæ¸…ç†

---

### WidgetManager

**ç±»åˆ«**: ç®¡ç†å™¨ç±»  
**ç»§æ‰¿**: QObject  
**ä½œç”¨**: Widgetçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ï¼Œè´Ÿè´£Widgetçš„åˆ›å»ºã€é”€æ¯ã€å¯åŠ¨å’Œåœæ­¢

#### ğŸ¯ è®¾è®¡ç›®çš„
WidgetManageræ˜¯Widgetçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ï¼Œé‡‡ç”¨å·¥å‚æ¨¡å¼åˆ›å»ºä¸åŒç±»å‹çš„Widgetï¼Œå¹¶æä¾›ç»Ÿä¸€çš„ç®¡ç†æ¥å£ã€‚æ”¯æŒWidgetçš„åŠ¨æ€åˆ›å»ºã€é…ç½®åŠ è½½ã€çŠ¶æ€ç®¡ç†ç­‰åŠŸèƒ½ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QMap<QString, BaseWidget*> m_widgets;  // Widgetå®ä¾‹æ˜ å°„
QString m_configPath;                  // é…ç½®æ–‡ä»¶è·¯å¾„
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
bool createWidget(const WidgetConfig& config);    // åˆ›å»ºWidget
bool removeWidget(const QString& id);             // ç§»é™¤Widget
bool startWidget(const QString& id);              // å¯åŠ¨Widget
bool stopWidget(const QString& id);               // åœæ­¢Widget
bool loadConfiguration();                         // åŠ è½½é…ç½®
bool saveConfiguration();                         // ä¿å­˜é…ç½®
QList<QString> getWidgetIds() const;              // è·å–Widget IDåˆ—è¡¨
BaseWidget* getWidget(const QString& id) const;   // è·å–Widgetå®ä¾‹
```

**ä¿¡å· (Signals)**:
```cpp
void widgetCreated(const QString& id);    // Widgetåˆ›å»ºä¿¡å·
void widgetRemoved(const QString& id);    // Widgetåˆ é™¤ä¿¡å·
void widgetStarted(const QString& id);    // Widgetå¯åŠ¨ä¿¡å·
void widgetStopped(const QString& id);    // Widgetåœæ­¢ä¿¡å·
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
WidgetManager* manager = new WidgetManager();

// åˆ›å»ºæ—¶é’ŸWidget
WidgetConfig clockConfig;
clockConfig.type = WidgetType::Clock;
clockConfig.name = "æ¡Œé¢æ—¶é’Ÿ";
clockConfig.position = QPoint(100, 100);

if (manager->createWidget(clockConfig)) {
    manager->startWidget(clockConfig.id);
}

// ç›‘å¬WidgetçŠ¶æ€å˜åŒ–
connect(manager, &WidgetManager::widgetCreated, 
        [](const QString& id) {
    qDebug() << "Widget created:" << id;
});
```

---

## Core Components

### BaseWidget

**ç±»åˆ«**: æŠ½è±¡åŸºç±»  
**ç»§æ‰¿**: QWidget  
**ä½œç”¨**: æ‰€æœ‰Widgetçš„åŸºç±»ï¼Œå®šä¹‰Widgetçš„åŸºæœ¬æ¥å£å’Œè¡Œä¸º

#### ğŸ¯ è®¾è®¡ç›®çš„
BaseWidgetæ˜¯æ‰€æœ‰Widgetçš„æŠ½è±¡åŸºç±»ï¼Œé‡‡ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰Widgetçš„åŸºæœ¬ç”Ÿå‘½å‘¨æœŸå’Œè¡Œä¸ºæ¥å£ã€‚æä¾›ç»Ÿä¸€çš„æ‹–æ‹½ã€é…ç½®ã€äº‹ä»¶å¤„ç†ç­‰åŸºç¡€åŠŸèƒ½ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ä¿æŠ¤å±æ€§**:
```cpp
WidgetConfig m_config;    // Widgeté…ç½®
bool m_isDragging;        // æ‹–æ‹½çŠ¶æ€
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
BaseWidget(const WidgetConfig& config, QWidget* parent = nullptr);
virtual ~BaseWidget();

// çº¯è™šå‡½æ•° - å­ç±»å¿…é¡»å®ç°
virtual void updateData() = 0;           // æ›´æ–°æ•°æ®
virtual void saveConfiguration() = 0;    // ä¿å­˜é…ç½®
virtual void loadConfiguration() = 0;    // åŠ è½½é…ç½®

// å…¬æœ‰æ¥å£
QString getId() const;                   // è·å–ID
WidgetType getType() const;             // è·å–ç±»å‹
```

**ä¿æŠ¤æ–¹æ³•**:
```cpp
void mousePressEvent(QMouseEvent* event) override;   // é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
void mouseMoveEvent(QMouseEvent* event) override;    // é¼ æ ‡ç§»åŠ¨äº‹ä»¶
void paintEvent(QPaintEvent* event) override;        // ç»˜åˆ¶äº‹ä»¶
```

**ä¿¡å·**:
```cpp
void configurationChanged();    // é…ç½®å˜åŒ–ä¿¡å·
void dataUpdated();            // æ•°æ®æ›´æ–°ä¿¡å·
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
// è‡ªå®šä¹‰Widgetå®ç°
class CustomWidget : public BaseWidget {
    Q_OBJECT
    
public:
    CustomWidget(const WidgetConfig& config, QWidget* parent = nullptr)
        : BaseWidget(config, parent) {
        loadConfiguration();
        setupUI();
    }
    
    void updateData() override {
        // å®ç°æ•°æ®æ›´æ–°é€»è¾‘
        QDateTime current = QDateTime::currentDateTime();
        updateDisplay(current);
        emit dataUpdated();
    }
    
    void saveConfiguration() override {
        // ä¿å­˜å½“å‰é…ç½®åˆ°æ–‡ä»¶
        m_config.customConfig["lastUpdate"] = QDateTime::currentDateTime();
        // ä¿å­˜åˆ°é…ç½®æ–‡ä»¶...
    }
    
    void loadConfiguration() override {
        // ä»é…ç½®æ–‡ä»¶åŠ è½½è®¾ç½®
        // è¯»å–é…ç½®æ–‡ä»¶...
    }
    
private:
    void setupUI() {
        // è®¾ç½®ç”¨æˆ·ç•Œé¢
    }
    
    void updateDisplay(const QDateTime& time) {
        // æ›´æ–°æ˜¾ç¤ºå†…å®¹
    }
};
```

---

### WidgetRenderer

**ç±»åˆ«**: æ¸²æŸ“å¼•æ“  
**ç»§æ‰¿**: æ— åŸºç±»  
**ä½œç”¨**: è´Ÿè´£Widgetçš„æ¸²æŸ“å’Œç»˜åˆ¶é˜Ÿåˆ—ç®¡ç†

#### ğŸ¯ è®¾è®¡ç›®çš„
WidgetRendererè´Ÿè´£Widgetçš„æ¸²æŸ“å·¥ä½œï¼Œé‡‡ç”¨æ¸²æŸ“é˜Ÿåˆ—æœºåˆ¶æé«˜ç»˜åˆ¶æ•ˆç‡ï¼Œæ”¯æŒæ‰¹é‡æ¸²æŸ“å’Œä¼˜å…ˆçº§è°ƒåº¦ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QQueue<BaseWidget*> renderQueue;    // æ¸²æŸ“é˜Ÿåˆ—
QMutex queueMutex;                  // é˜Ÿåˆ—äº’æ–¥é”
bool isRendering;                   // æ¸²æŸ“çŠ¶æ€
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
void render(BaseWidget* widget);        // æ¸²æŸ“å•ä¸ªWidget
void addToQueue(BaseWidget* widget);    // æ·»åŠ åˆ°æ¸²æŸ“é˜Ÿåˆ—
void processQueue();                    // å¤„ç†æ¸²æŸ“é˜Ÿåˆ—
void clearQueue();                      // æ¸…ç©ºé˜Ÿåˆ—
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
WidgetRenderer* renderer = new WidgetRenderer();

// æ¸²æŸ“å•ä¸ªWidget
BaseWidget* widget = manager->getWidget("clock_001");
renderer->render(widget);

// æ‰¹é‡æ¸²æŸ“
for (const QString& id : manager->getWidgetIds()) {
    BaseWidget* w = manager->getWidget(id);
    renderer->addToQueue(w);
}
renderer->processQueue();
```

---

### InteractionSystem

**ç±»åˆ«**: äº¤äº’ç³»ç»Ÿ  
**ç»§æ‰¿**: æ— åŸºç±»  
**ä½œç”¨**: å¤„ç†ç”¨æˆ·ä¸Widgetçš„äº¤äº’äº‹ä»¶

#### ğŸ¯ è®¾è®¡ç›®çš„
InteractionSystemè´Ÿè´£å¤„ç†ç”¨æˆ·è¾“å…¥äº‹ä»¶ï¼ŒåŒ…æ‹¬é¼ æ ‡ã€é”®ç›˜äº‹ä»¶çš„åˆ†å‘å’Œå¤„ç†ï¼Œæ”¯æŒWidgetçš„æ‹–æ‹½ã€ç‚¹å‡»ã€å¿«æ·é”®ç­‰äº¤äº’åŠŸèƒ½ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
BaseWidget* activeWidget;    // å½“å‰æ´»åŠ¨Widget
QPoint lastMousePos;         // ä¸Šæ¬¡é¼ æ ‡ä½ç½®
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
bool handleMouseEvent(QMouseEvent* event);    // å¤„ç†é¼ æ ‡äº‹ä»¶
bool handleKeyEvent(QKeyEvent* event);        // å¤„ç†é”®ç›˜äº‹ä»¶
void setActiveWidget(BaseWidget* widget);     // è®¾ç½®æ´»åŠ¨Widget
BaseWidget* getActiveWidget() const;          // è·å–æ´»åŠ¨Widget
```

---

## Backend Management

### ManagementWindow

**ç±»åˆ«**: ä¸»çª—å£ç±»  
**ç»§æ‰¿**: QWidget  
**ä½œç”¨**: ç³»ç»Ÿä¸»ç®¡ç†ç•Œé¢ï¼Œæä¾›Widgetç®¡ç†åŠŸèƒ½

#### ğŸ¯ è®¾è®¡ç›®çš„
ManagementWindowæ˜¯ç³»ç»Ÿçš„ä¸»ç®¡ç†ç•Œé¢ï¼Œæä¾›å¯è§†åŒ–çš„Widgetç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬Widgetåˆ—è¡¨æ˜¾ç¤ºã€åˆ›å»ºã€é…ç½®ã€åˆ é™¤ç­‰æ“ä½œã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
WidgetManager* widgetManager;    // Widgetç®¡ç†å™¨å¼•ç”¨
QVBoxLayout* ui;                 // ä¸»å¸ƒå±€
QListWidget* widgetList;         // Widgetåˆ—è¡¨
QPushButton* createButton;       // åˆ›å»ºæŒ‰é’®
QPushButton* configButton;       // é…ç½®æŒ‰é’®
QPushButton* removeButton;       // åˆ é™¤æŒ‰é’®
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
ManagementWindow(QWidget* parent = nullptr);
void refreshWidgetList();                    // åˆ·æ–°Widgetåˆ—è¡¨
void showCreateDialog();                     // æ˜¾ç¤ºåˆ›å»ºå¯¹è¯æ¡†
void showConfigDialog(const QString& id);    // æ˜¾ç¤ºé…ç½®å¯¹è¯æ¡†
```

**ç§æœ‰æ§½å‡½æ•°**:
```cpp
void onCreateWidget();     // åˆ›å»ºWidgetå“åº”
void onRemoveWidget();     // åˆ é™¤Widgetå“åº”
void onConfigWidget();     // é…ç½®Widgetå“åº”
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
ManagementWindow* window = new ManagementWindow();
window->show();

// åˆ·æ–°Widgetåˆ—è¡¨
window->refreshWidgetList();

// ç›‘å¬Widgetå˜åŒ–
connect(widgetManager, &WidgetManager::widgetCreated,
        window, &ManagementWindow::refreshWidgetList);
```

---

### ConfigWindow

**ç±»åˆ«**: é…ç½®çª—å£ç±»  
**ç»§æ‰¿**: QDialog  
**ä½œç”¨**: Widgeté…ç½®ç•Œé¢ï¼Œæä¾›å‚æ•°è®¾ç½®åŠŸèƒ½

#### ğŸ¯ è®¾è®¡ç›®çš„
ConfigWindowä¸ºå„ç§Widgetæä¾›ç»Ÿä¸€çš„é…ç½®ç•Œé¢ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½ä¸åŒWidgetçš„é…ç½®é€‰é¡¹ï¼Œæä¾›å®æ—¶é¢„è§ˆå’ŒéªŒè¯åŠŸèƒ½ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
BaseWidget* currentWidget;              // å½“å‰é…ç½®çš„Widget
QMap<QString, QVariant> settings;       // é…ç½®è®¾ç½®
QFormLayout* configLayout;              // é…ç½®è¡¨å•å¸ƒå±€
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
ConfigWindow(BaseWidget* widget, QWidget* parent = nullptr);
void applySettings();      // åº”ç”¨è®¾ç½®
void resetSettings();      // é‡ç½®è®¾ç½®
```

**ç§æœ‰æ–¹æ³•**:
```cpp
bool validateInput();      // éªŒè¯è¾“å…¥
void setupUI();           // è®¾ç½®ç•Œé¢
```

---

### CreateWidgetDialog

**ç±»åˆ«**: åˆ›å»ºå¯¹è¯æ¡†ç±»  
**ç»§æ‰¿**: QDialog  
**ä½œç”¨**: Widgetåˆ›å»ºå‘å¯¼ï¼ŒæŒ‡å¯¼ç”¨æˆ·åˆ›å»ºæ–°Widget

#### ğŸ¯ è®¾è®¡ç›®çš„
CreateWidgetDialogæä¾›å‹å¥½çš„Widgetåˆ›å»ºå‘å¯¼ï¼Œå¸®åŠ©ç”¨æˆ·é€‰æ‹©Widgetç±»å‹ã€é…ç½®åŸºæœ¬å‚æ•°ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„WidgetConfigå¯¹è±¡ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QComboBox* widgetTypeCombo;    // Widgetç±»å‹é€‰æ‹©
QLineEdit* nameEdit;           // åç§°è¾“å…¥æ¡†
QSpinBox* xPosSpinBox;         // Xä½ç½®
QSpinBox* yPosSpinBox;         // Yä½ç½®
QSpinBox* widthSpinBox;        // å®½åº¦
QSpinBox* heightSpinBox;       // é«˜åº¦
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
CreateWidgetDialog(QWidget* parent = nullptr);
WidgetConfig getWidgetConfig() const;    // è·å–é…ç½®
```

**ç§æœ‰æ§½å‡½æ•°**:
```cpp
void onTypeChanged();    // ç±»å‹å˜åŒ–å“åº”
void onAccept();         // ç¡®è®¤å“åº”
```

---

### ThemeSettingsDialog

**ç±»åˆ«**: ä¸»é¢˜è®¾ç½®å¯¹è¯æ¡†  
**ç»§æ‰¿**: QDialog  
**ä½œç”¨**: ä¸»é¢˜ç®¡ç†ç•Œé¢ï¼Œæä¾›ä¸»é¢˜é€‰æ‹©å’Œé¢„è§ˆåŠŸèƒ½

#### ğŸ¯ è®¾è®¡ç›®çš„
ThemeSettingsDialogæä¾›ä¸»é¢˜ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒä¸»é¢˜é¢„è§ˆã€åˆ‡æ¢ã€å¯¼å…¥å¯¼å‡ºç­‰æ“ä½œï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„ç•Œé¢å®šåˆ¶ä½“éªŒã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
ThemeManager* themeManager;    // ä¸»é¢˜ç®¡ç†å™¨
QListWidget* themeList;        // ä¸»é¢˜åˆ—è¡¨
QWidget* previewWidget;        // é¢„è§ˆåŒºåŸŸ
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
ThemeSettingsDialog(QWidget* parent = nullptr);
void refreshThemeList();                      // åˆ·æ–°ä¸»é¢˜åˆ—è¡¨
void applyTheme(const QString& themeName);    // åº”ç”¨ä¸»é¢˜
```

**ç§æœ‰æ§½å‡½æ•°**:
```cpp
void onThemeSelected();    // ä¸»é¢˜é€‰æ‹©å“åº”
```

---

## Utils

### SystemTray

**ç±»åˆ«**: ç³»ç»Ÿæ‰˜ç›˜ç±»  
**ç»§æ‰¿**: QObject  
**ä½œç”¨**: ç³»ç»Ÿæ‰˜ç›˜ç®¡ç†ï¼Œæä¾›æœ€å°åŒ–åˆ°æ‰˜ç›˜åŠŸèƒ½

#### ğŸ¯ è®¾è®¡ç›®çš„
SystemTrayç®¡ç†ç³»ç»Ÿæ‰˜ç›˜ç›¸å…³åŠŸèƒ½ï¼Œæä¾›æ‰˜ç›˜å›¾æ ‡æ˜¾ç¤ºã€å³é”®èœå•ã€æ¶ˆæ¯é€šçŸ¥ç­‰åŠŸèƒ½ï¼Œè®©åº”ç”¨ç¨‹åºå¯ä»¥åœ¨åå°è¿è¡Œã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QSystemTrayIcon* trayIcon;    // æ‰˜ç›˜å›¾æ ‡
QMenu* trayMenu;              // æ‰˜ç›˜èœå•
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
SystemTray(QObject* parent = nullptr);
void show();                                           // æ˜¾ç¤ºæ‰˜ç›˜å›¾æ ‡
void hide();                                          // éšè—æ‰˜ç›˜å›¾æ ‡
void showMessage(const QString& title, 
                const QString& message);               // æ˜¾ç¤ºæ¶ˆæ¯
```

**ç§æœ‰æ§½å‡½æ•°**:
```cpp
void onTrayActivated(QSystemTrayIcon::ActivationReason reason);
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
SystemTray* tray = new SystemTray();
tray->show();

// æ˜¾ç¤ºé€šçŸ¥æ¶ˆæ¯
tray->showMessage("Widgetç³»ç»Ÿ", "æ–°çš„Widgetå·²åˆ›å»º");
```

---

### Logger

**ç±»åˆ«**: æ—¥å¿—ç³»ç»Ÿç±»  
**ç»§æ‰¿**: é™æ€ç±»  
**ä½œç”¨**: å…¨å±€æ—¥å¿—è®°å½•ç³»ç»Ÿï¼Œæä¾›åˆ†çº§æ—¥å¿—åŠŸèƒ½

#### ğŸ¯ è®¾è®¡ç›®çš„
Loggeræä¾›å…¨å±€ç»Ÿä¸€çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒå¤šçº§åˆ«æ—¥å¿—ã€æ–‡ä»¶è¾“å‡ºã€æ ¼å¼åŒ–ç­‰åŠŸèƒ½ï¼Œä¾¿äºç³»ç»Ÿè°ƒè¯•å’Œé—®é¢˜è¿½è¸ªã€‚

#### ğŸ“Š ç±»æˆå‘˜

**é™æ€å±æ€§**:
```cpp
static QFile* logFile;        // æ—¥å¿—æ–‡ä»¶
static LogLevel logLevel;     // æ—¥å¿—çº§åˆ«
```

**é™æ€æ–¹æ³•**:
```cpp
static void initialize();                      // åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ
static void debug(const QString& message);     // è°ƒè¯•æ—¥å¿—
static void info(const QString& message);      // ä¿¡æ¯æ—¥å¿—
static void warning(const QString& message);   // è­¦å‘Šæ—¥å¿—
static void error(const QString& message);     // é”™è¯¯æ—¥å¿—
static void critical(const QString& message);  // ä¸¥é‡é”™è¯¯æ—¥å¿—
```

**ç§æœ‰æ–¹æ³•**:
```cpp
static void writeLog(LogLevel level, const QString& message);
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
// åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ
Logger::initialize();

// è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—
Logger::info("ç³»ç»Ÿå¯åŠ¨");
Logger::debug("Widgeté…ç½®åŠ è½½å®Œæˆ");
Logger::warning("ç½‘ç»œè¿æ¥è¶…æ—¶");
Logger::error("é…ç½®æ–‡ä»¶è¯»å–å¤±è´¥");
Logger::critical("ç³»ç»Ÿå†…å­˜ä¸è¶³");
```

---

### ThemeManager

**ç±»åˆ«**: ä¸»é¢˜ç®¡ç†å™¨  
**ç»§æ‰¿**: QObject  
**ä½œç”¨**: ä¸»é¢˜ç³»ç»Ÿç®¡ç†ï¼Œè´Ÿè´£ä¸»é¢˜åŠ è½½ã€åˆ‡æ¢å’Œèµ„æºç®¡ç†

#### ğŸ¯ è®¾è®¡ç›®çš„
ThemeManagerè´Ÿè´£æ•´ä¸ªä¸»é¢˜ç³»ç»Ÿçš„ç®¡ç†ï¼ŒåŒ…æ‹¬ä¸»é¢˜åŠ è½½ã€åˆ‡æ¢ã€èµ„æºç®¡ç†ç­‰åŠŸèƒ½ï¼Œä¸ºç³»ç»Ÿæä¾›ä¸ªæ€§åŒ–çš„å¤–è§‚å®šåˆ¶èƒ½åŠ›ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QString currentTheme;                        // å½“å‰ä¸»é¢˜
QMap<QString, ThemeData> themes;             // ä¸»é¢˜æ•°æ®æ˜ å°„
ThemeResourceManager* resourceManager;       // èµ„æºç®¡ç†å™¨
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
bool loadTheme(const QString& name);         // åŠ è½½ä¸»é¢˜
QString getCurrentTheme() const;             // è·å–å½“å‰ä¸»é¢˜
QStringList getAvailableThemes() const;      // è·å–å¯ç”¨ä¸»é¢˜åˆ—è¡¨
void applyTheme(const QString& name);        // åº”ç”¨ä¸»é¢˜
```

**ä¿¡å·**:
```cpp
void themeChanged(const QString& name);      // ä¸»é¢˜å˜åŒ–ä¿¡å·
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
ThemeManager* themeManager = new ThemeManager();

// åŠ è½½å¹¶åº”ç”¨ä¸»é¢˜
if (themeManager->loadTheme("dark")) {
    themeManager->applyTheme("dark");
}

// ç›‘å¬ä¸»é¢˜å˜åŒ–
connect(themeManager, &ThemeManager::themeChanged,
        [](const QString& name) {
    qDebug() << "ä¸»é¢˜å·²åˆ‡æ¢åˆ°:" << name;
});
```

---

### ThemeResourceManager

**ç±»åˆ«**: ä¸»é¢˜èµ„æºç®¡ç†å™¨  
**ç»§æ‰¿**: æ— åŸºç±»  
**ä½œç”¨**: ä¸»é¢˜èµ„æºçš„åŠ è½½ã€ç¼“å­˜å’Œç®¡ç†

#### ğŸ¯ è®¾è®¡ç›®çš„
ThemeResourceManagerä¸“é—¨è´Ÿè´£ä¸»é¢˜ç›¸å…³èµ„æºçš„ç®¡ç†ï¼ŒåŒ…æ‹¬æ ·å¼è¡¨ã€å›¾æ ‡ã€å­—ä½“ç­‰èµ„æºçš„åŠ è½½ã€ç¼“å­˜å’Œé‡Šæ”¾ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QMap<QString, QVariant> resources;      // èµ„æºç¼“å­˜
QMap<QString, QString> stylesheets;     // æ ·å¼è¡¨ç¼“å­˜
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
bool loadThemeResources(const QString& themeName);    // åŠ è½½ä¸»é¢˜èµ„æº
QString getStylesheet(const QString& widget);         // è·å–æ ·å¼è¡¨
QVariant getResource(const QString& key);             // è·å–èµ„æº
void clearCache();                                    // æ¸…ç©ºç¼“å­˜
```

---

## Widget Types

### ClockWidget

**ç±»åˆ«**: æ—¶é’ŸWidget  
**ç»§æ‰¿**: BaseWidget  
**ä½œç”¨**: æ˜¾ç¤ºæ—¶é—´å’Œæ—¥æœŸçš„Widget

#### ğŸ¯ è®¾è®¡ç›®çš„
ClockWidgetæä¾›æ—¶é’Ÿæ˜¾ç¤ºåŠŸèƒ½ï¼Œæ”¯æŒå¤šç§æ—¶é—´æ ¼å¼ã€æ—¥æœŸæ˜¾ç¤ºã€å®šæ—¶æ›´æ–°ç­‰åŠŸèƒ½ï¼Œæ˜¯æœ€åŸºç¡€å’Œå¸¸ç”¨çš„æ¡Œé¢Widgetã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QTimer* timer;           // æ›´æ–°å®šæ—¶å™¨
QLabel* timeLabel;       // æ—¶é—´æ ‡ç­¾
QLabel* dateLabel;       // æ—¥æœŸæ ‡ç­¾
QString format;          // æ—¶é—´æ ¼å¼
bool showDate;           // æ˜¯å¦æ˜¾ç¤ºæ—¥æœŸ
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
ClockWidget(const WidgetConfig& config, QWidget* parent = nullptr);
void updateData() override;           // æ›´æ–°æ—¶é—´æ•°æ®
void saveConfiguration() override;    // ä¿å­˜é…ç½®
void loadConfiguration() override;    // åŠ è½½é…ç½®
```

**ç§æœ‰æ–¹æ³•**:
```cpp
void updateTime();                    // æ›´æ–°æ—¶é—´æ˜¾ç¤º
QString formatTime();                 // æ ¼å¼åŒ–æ—¶é—´
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
WidgetConfig clockConfig;
clockConfig.type = WidgetType::Clock;
clockConfig.name = "æ¡Œé¢æ—¶é’Ÿ";
clockConfig.customConfig["format"] = "hh:mm:ss";
clockConfig.customConfig["showDate"] = true;

ClockWidget* clock = new ClockWidget(clockConfig);
clock->show();
```

---

### WeatherWidget

**ç±»åˆ«**: å¤©æ°”Widget  
**ç»§æ‰¿**: BaseWidget  
**ä½œç”¨**: æ˜¾ç¤ºå¤©æ°”ä¿¡æ¯çš„Widget

#### ğŸ¯ è®¾è®¡ç›®çš„
WeatherWidgetæä¾›å®æ—¶å¤©æ°”ä¿¡æ¯æ˜¾ç¤ºï¼Œæ”¯æŒå¤šåŸå¸‚ã€å¤©æ°”å›¾æ ‡ã€æ¸©åº¦æ˜¾ç¤ºã€å®šæ—¶æ›´æ–°ç­‰åŠŸèƒ½ï¼Œé€šè¿‡ç½‘ç»œAPIè·å–å¤©æ°”æ•°æ®ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QLabel* weatherLabel;                    // å¤©æ°”æè¿°æ ‡ç­¾
QLabel* temperatureLabel;                // æ¸©åº¦æ ‡ç­¾
QLabel* iconLabel;                       // å¤©æ°”å›¾æ ‡æ ‡ç­¾
QNetworkAccessManager* networkManager;   // ç½‘ç»œç®¡ç†å™¨
QString apiKey;                          // APIå¯†é’¥
QString city;                            // åŸå¸‚åç§°
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
WeatherWidget(const WidgetConfig& config, QWidget* parent = nullptr);
void updateData() override;              // æ›´æ–°å¤©æ°”æ•°æ®
void saveConfiguration() override;       // ä¿å­˜é…ç½®
void loadConfiguration() override;       // åŠ è½½é…ç½®
```

**ç§æœ‰æ–¹æ³•**:
```cpp
void fetchWeatherData();                 // è·å–å¤©æ°”æ•°æ®
void parseWeatherResponse(const QByteArray& data);  // è§£æå¤©æ°”å“åº”
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
WidgetConfig weatherConfig;
weatherConfig.type = WidgetType::Weather;
weatherConfig.customConfig["apiKey"] = "your_api_key";
weatherConfig.customConfig["city"] = "åŒ—äº¬";

WeatherWidget* weather = new WeatherWidget(weatherConfig);
weather->show();
```

---

### CalendarWidget

**ç±»åˆ«**: æ—¥å†Widget  
**ç»§æ‰¿**: BaseWidget  
**ä½œç”¨**: æ˜¾ç¤ºæ—¥å†å’Œäº‹ä»¶ç®¡ç†çš„Widget

#### ğŸ¯ è®¾è®¡ç›®çš„
CalendarWidgetæä¾›æ—¥å†æ˜¾ç¤ºå’Œç®€å•çš„äº‹ä»¶ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒæ—¥æœŸé€‰æ‹©ã€äº‹ä»¶æ·»åŠ ã€äº‹ä»¶æé†’ç­‰åŠŸèƒ½ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QCalendarWidget* calendar;              // æ—¥å†æ§ä»¶
QListWidget* eventList;                 // äº‹ä»¶åˆ—è¡¨
QMap<QDate, QStringList> events;        // äº‹ä»¶æ˜ å°„
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
CalendarWidget(const WidgetConfig& config, QWidget* parent = nullptr);
void updateData() override;
void saveConfiguration() override;
void loadConfiguration() override;
```

**ç§æœ‰æ–¹æ³•**:
```cpp
void onDateSelected(const QDate& date);              // æ—¥æœŸé€‰æ‹©å¤„ç†
void addEvent(const QDate& date, const QString& event);  // æ·»åŠ äº‹ä»¶
```

---

### NotesWidget

**ç±»åˆ«**: ä¾¿ç­¾Widget  
**ç»§æ‰¿**: BaseWidget  
**ä½œç”¨**: æ–‡æœ¬ä¾¿ç­¾è®°å½•Widget

#### ğŸ¯ è®¾è®¡ç›®çš„
NotesWidgetæä¾›å¯Œæ–‡æœ¬ä¾¿ç­¾åŠŸèƒ½ï¼Œæ”¯æŒæ–‡æœ¬ç¼–è¾‘ã€æ ¼å¼è®¾ç½®ã€è‡ªåŠ¨ä¿å­˜ç­‰åŠŸèƒ½ï¼Œé€‚åˆè®°å½•å¾…åŠäº‹é¡¹å’Œç®€å•ç¬”è®°ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QTextEdit* textEdit;        // æ–‡æœ¬ç¼–è¾‘å™¨
QPushButton* saveButton;    // ä¿å­˜æŒ‰é’®
QString content;            // ä¾¿ç­¾å†…å®¹
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
NotesWidget(const WidgetConfig& config, QWidget* parent = nullptr);
void updateData() override;
void saveConfiguration() override;
void loadConfiguration() override;
```

**ç§æœ‰æ–¹æ³•**:
```cpp
void saveNotes();           // ä¿å­˜ä¾¿ç­¾
void onTextChanged();       // æ–‡æœ¬å˜åŒ–å¤„ç†
```

---

### SimpleNotesWidget

**ç±»åˆ«**: ç®€å•ä¾¿ç­¾Widget  
**ç»§æ‰¿**: BaseWidget  
**ä½œç”¨**: æç®€ä¾¿ç­¾æ˜¾ç¤ºWidget

#### ğŸ¯ è®¾è®¡ç›®çš„
SimpleNotesWidgetæä¾›æç®€çš„ä¾¿ç­¾æ˜¾ç¤ºåŠŸèƒ½ï¼Œåªæ”¯æŒçº¯æ–‡æœ¬æ˜¾ç¤ºå’Œç®€å•ç¼–è¾‘ï¼Œå ç”¨èµ„æºæ›´å°‘ï¼Œé€‚åˆæ˜¾ç¤ºç®€çŸ­æé†’ä¿¡æ¯ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QLabel* noteLabel;          // ä¾¿ç­¾æ ‡ç­¾
QPushButton* editButton;    // ç¼–è¾‘æŒ‰é’®
bool isEditing;             // ç¼–è¾‘çŠ¶æ€
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
SimpleNotesWidget(const WidgetConfig& config, QWidget* parent = nullptr);
void updateData() override;
void saveConfiguration() override;
void loadConfiguration() override;
```

**ç§æœ‰æ–¹æ³•**:
```cpp
void toggleEditMode();      // åˆ‡æ¢ç¼–è¾‘æ¨¡å¼
```

---

### AIRankingWidget

**ç±»åˆ«**: AIæ’è¡Œæ¦œWidget  
**ç»§æ‰¿**: BaseWidget  
**ä½œç”¨**: æ˜¾ç¤ºAIæ’è¡Œæ¦œä¿¡æ¯çš„Widget

#### ğŸ¯ è®¾è®¡ç›®çš„
AIRankingWidgetæ˜¾ç¤ºå„ç§AIç›¸å…³çš„æ’è¡Œæ¦œä¿¡æ¯ï¼Œå¦‚AIæ¨¡å‹æ’åã€æŠ€æœ¯è¶‹åŠ¿ç­‰ï¼Œé€šè¿‡ç½‘ç»œAPIå®šæ—¶è·å–æœ€æ–°æ•°æ®ã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QListWidget* rankingList;               // æ’è¡Œæ¦œåˆ—è¡¨
QTimer* updateTimer;                    // æ›´æ–°å®šæ—¶å™¨
QNetworkAccessManager* networkManager;  // ç½‘ç»œç®¡ç†å™¨
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
AIRankingWidget(const WidgetConfig& config, QWidget* parent = nullptr);
void updateData() override;
void saveConfiguration() override;
void loadConfiguration() override;
```

**ç§æœ‰æ–¹æ³•**:
```cpp
void fetchRankingData();        // è·å–æ’è¡Œæ¦œæ•°æ®
void updateRankingDisplay();    // æ›´æ–°æ’è¡Œæ¦œæ˜¾ç¤º
```

---

### SystemPerformanceWidget

**ç±»åˆ«**: ç³»ç»Ÿæ€§èƒ½ç›‘æ§Widget  
**ç»§æ‰¿**: BaseWidget  
**ä½œç”¨**: ç³»ç»Ÿæ€§èƒ½å®æ—¶ç›‘æ§Widget

#### ğŸ¯ è®¾è®¡ç›®çš„
SystemPerformanceWidgetå®æ—¶ç›‘æ§ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…æ‹¬CPUä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜ä½¿ç”¨ç‡ç­‰ï¼Œæä¾›å¯è§†åŒ–çš„æ€§èƒ½å±•ç¤ºã€‚

#### ğŸ“Š ç±»æˆå‘˜

**ç§æœ‰å±æ€§**:
```cpp
QProgressBar* cpuUsageBar;      // CPUä½¿ç”¨ç‡è¿›åº¦æ¡
QProgressBar* memoryUsageBar;   // å†…å­˜ä½¿ç”¨ç‡è¿›åº¦æ¡
QProgressBar* diskUsageBar;     // ç£ç›˜ä½¿ç”¨ç‡è¿›åº¦æ¡
QTimer* updateTimer;            // æ›´æ–°å®šæ—¶å™¨
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
SystemPerformanceWidget(const WidgetConfig& config, QWidget* parent = nullptr);
void updateData() override;
void saveConfiguration() override;
void loadConfiguration() override;
```

**ç§æœ‰æ–¹æ³•**:
```cpp
void updateSystemInfo();       // æ›´æ–°ç³»ç»Ÿä¿¡æ¯
double getCpuUsage();          // è·å–CPUä½¿ç”¨ç‡
double getMemoryUsage();       // è·å–å†…å­˜ä½¿ç”¨ç‡
```

---

## Data Structures

### WidgetConfig

**ç±»åˆ«**: æ•°æ®ç»“æ„  
**ä½œç”¨**: Widgeté…ç½®æ•°æ®ç»“æ„ï¼Œå­˜å‚¨Widgetçš„æ‰€æœ‰é…ç½®ä¿¡æ¯

#### ğŸ¯ è®¾è®¡ç›®çš„
WidgetConfigæ˜¯Widgeté…ç½®çš„æ•°æ®è½½ä½“ï¼ŒåŒ…å«Widgetçš„åŸºæœ¬ä¿¡æ¯ã€ä½ç½®å¤§å°ã€è‡ªå®šä¹‰é…ç½®ç­‰ï¼Œæ”¯æŒJSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚

#### ğŸ“Š ç»“æ„æˆå‘˜

**å…¬æœ‰å±æ€§**:
```cpp
QString id;                     // Widgetå”¯ä¸€æ ‡è¯†ç¬¦
WidgetType type;               // Widgetç±»å‹
QString name;                  // Widgetåç§°
QPoint position;               // Widgetä½ç½®
QSize size;                    // Widgetå¤§å°
QVariantMap customConfig;      // è‡ªå®šä¹‰é…ç½®é¡¹
bool isVisible;                // æ˜¯å¦å¯è§
bool isEnabled;                // æ˜¯å¦å¯ç”¨
```

**å…¬æœ‰æ–¹æ³•**:
```cpp
WidgetConfig();                                    // é»˜è®¤æ„é€ å‡½æ•°
WidgetConfig(WidgetType type, const QString& name); // å¸¦å‚æ„é€ å‡½æ•°
QJsonObject toJson() const;                        // è½¬æ¢ä¸ºJSON
bool fromJson(const QJsonObject& json);            // ä»JSONåŠ è½½
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
// åˆ›å»ºé…ç½®
WidgetConfig config(WidgetType::Clock, "æ¡Œé¢æ—¶é’Ÿ");
config.position = QPoint(100, 100);
config.size = QSize(200, 100);
config.customConfig["format"] = "hh:mm:ss";
config.customConfig["showDate"] = true;

// åºåˆ—åŒ–ä¸ºJSON
QJsonObject json = config.toJson();

// ä»JSONååºåˆ—åŒ–
WidgetConfig newConfig;
newConfig.fromJson(json);
```

---

### WidgetType

**ç±»åˆ«**: æšä¸¾ç±»å‹  
**ä½œç”¨**: å®šä¹‰ç³»ç»Ÿæ”¯æŒçš„Widgetç±»å‹

#### ğŸ¯ è®¾è®¡ç›®çš„
WidgetTypeæšä¸¾å®šä¹‰äº†ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰Widgetç±»å‹ï¼Œä¸ºWidgetçš„åˆ›å»ºã€ç®¡ç†å’Œé…ç½®æä¾›ç±»å‹æ ‡è¯†ã€‚

#### ğŸ“Š æšä¸¾å€¼

```cpp
enum class WidgetType {
    Clock,              // æ—¶é’ŸWidget
    Weather,            // å¤©æ°”Widget
    SystemInfo,         // ç³»ç»Ÿä¿¡æ¯Widget
    Calendar,           // æ—¥å†Widget
    Notes,              // ä¾¿ç­¾Widget
    SimpleNotes,        // ç®€å•ä¾¿ç­¾Widget
    AIRanking           // AIæ’è¡Œæ¦œWidget
};
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
// ç±»å‹åˆ¤æ–­
if (widget->getType() == WidgetType::Clock) {
    ClockWidget* clock = static_cast<ClockWidget*>(widget);
    // å¤„ç†æ—¶é’ŸWidgetç‰¹æœ‰é€»è¾‘
}

// ç±»å‹è½¬æ¢
QString typeString = widgetTypeToString(WidgetType::Weather);
WidgetType type = stringToWidgetType("Clock");
```

---

### LogLevel

**ç±»åˆ«**: æšä¸¾ç±»å‹  
**ä½œç”¨**: å®šä¹‰æ—¥å¿—è®°å½•çš„çº§åˆ«

#### ğŸ¯ è®¾è®¡ç›®çš„
LogLevelæšä¸¾å®šä¹‰äº†æ—¥å¿—ç³»ç»Ÿçš„è®°å½•çº§åˆ«ï¼Œç”¨äºæ§åˆ¶æ—¥å¿—è¾“å‡ºçš„è¯¦ç»†ç¨‹åº¦å’Œé‡è¦æ€§åˆ†ç±»ã€‚

#### ğŸ“Š æšä¸¾å€¼

```cpp
enum class LogLevel {
    DEBUG,      // è°ƒè¯•ä¿¡æ¯ - æœ€è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯
    INFO,       // ä¸€èˆ¬ä¿¡æ¯ - ç¨‹åºè¿è¡Œçš„å…³é”®ä¿¡æ¯
    WARNING,    // è­¦å‘Šä¿¡æ¯ - å¯èƒ½çš„é—®é¢˜æç¤º
    ERROR,      // é”™è¯¯ä¿¡æ¯ - è¿è¡Œæ—¶é”™è¯¯
    CRITICAL    // ä¸¥é‡é”™è¯¯ - å¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒçš„é”™è¯¯
};
```

#### ğŸ”§ ä½¿ç”¨ç¤ºä¾‹
```cpp
// è®¾ç½®æ—¥å¿—çº§åˆ«
Logger::setLogLevel(LogLevel::INFO);

// æ ¹æ®çº§åˆ«è®°å½•æ—¥å¿—
Logger::debug("è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯");     // åªåœ¨DEBUGçº§åˆ«è¾“å‡º
Logger::info("ç¨‹åºå¯åŠ¨æˆåŠŸ");        // INFOçº§åˆ«åŠä»¥ä¸Šè¾“å‡º
Logger::warning("é…ç½®æ–‡ä»¶è¿‡æœŸ");     // WARNINGçº§åˆ«åŠä»¥ä¸Šè¾“å‡º
Logger::error("ç½‘ç»œè¿æ¥å¤±è´¥");       // ERRORçº§åˆ«åŠä»¥ä¸Šè¾“å‡º
Logger::critical("å†…å­˜åˆ†é…å¤±è´¥");    // æ€»æ˜¯è¾“å‡º
```

---

## æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†æ¡Œé¢å°éƒ¨ä»¶ç³»ç»Ÿä¸­çš„æ¯ä¸ªç±»ï¼ŒåŒ…æ‹¬å…¶è®¾è®¡ç›®çš„ã€åŠŸèƒ½ç‰¹æ€§ã€æ¥å£å®šä¹‰å’Œä½¿ç”¨æ–¹æ³•ã€‚æ•´ä¸ªç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚

### ğŸ’¡ å¼€å‘å»ºè®®

1. **æ–°å¢Widgetç±»å‹**: ç»§æ‰¿BaseWidgetå¹¶å®ç°å¿…è¦æ¥å£
2. **æ‰©å±•åŠŸèƒ½**: åœ¨ç›¸åº”çš„ç®¡ç†ç±»ä¸­æ·»åŠ æ–°åŠŸèƒ½
3. **ä¸»é¢˜å®šåˆ¶**: é€šè¿‡ThemeManagerç³»ç»Ÿå®ç°ä¸ªæ€§åŒ–ç•Œé¢
4. **æ—¥å¿—è°ƒè¯•**: å……åˆ†åˆ©ç”¨Loggerç³»ç»Ÿè¿›è¡Œé—®é¢˜è¯Šæ–­

### ğŸ“– ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£](æŠ€æœ¯è¯´æ˜æ–‡æ¡£.md)
- [UMLç±»å›¾](desktop_widget_system_uml.puml)
- [ç±»å…³ç³»åˆ†ææŠ¥å‘Š](ç±»å…³ç³»åˆ†ææŠ¥å‘Š.md)
- [ä½¿ç”¨è¯´æ˜æ–‡æ¡£](UMLå›¾ç”Ÿæˆä½¿ç”¨è¯´æ˜.md) 